# SystemVerilog RTL

A SystemVerilog implementation of the Matlab-designed filter.  Rather than relying on Matlab `fi` function(s), the Matlab is implemented in Q.15.  The SystemVerilog module implementes `hb_check.m` in fixed-point Q.15.

## Clock considerations

The filter could be implemented as Polyphase, but it is not.  Instead, the filter operates at the input clock rate.  Downsampling in Matlab is trivial: just do `junk=signal(1:2:length(signal);`.  In RTL it is a little more complicated.  We have multiple bits of synchronous logic and we are going from a faster clock domain to a slower clock domain.  It could be handled several ways.  The concern is the possibility of the bits arriving downstream at slightly different times.  The first approach to handle that is to use a counter with a clock_en to only enable the lower data rate operations every 2nd clock.  The clock rate would remain unchanged, it just means logic would only happen when the enable is set.  This is very common in FPGA designs.  The second method, and is the lowest power method, is to use a short asynchronous FIFO.  This is the only method I have seen in ASICs but it could be used in FPGAs as well.  I think it would also be possible to utilize a Multi-Cycle Path (MCP).  I intend to try out all the approaches but for right now it uses a clock enable.  

## Usage

`hb_filter.sv` is fully synthesizable
`hb_filter_tb.sv` was checked in ModelSim 2021.4.  I plan to check it in Icarus Verilog in the future.  The `inputs.txt` and `outputs.txt` generated by the Matlab function `hb_check_tb.m` are required to run the SV testbench.
